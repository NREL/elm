

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>elm.ords.process.process_counties_with_openai &mdash; elm 0.0.34 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=9dd25805"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="elm.ords.process.process_county" href="elm.ords.process.process_county.html" />
    <link rel="prev" title="elm.ords.process" href="elm.ords.process.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            elm
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples.energy_wizard.html">The Energy Wizard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples.energy_wizard.html#downloading-and-embedding-pdfs">Downloading and Embedding PDFs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples.energy_wizard.html#running-the-streamlit-app">Running the Streamlit App</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples.ordinance_gpt.html">Ordinance GPT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples.ordinance_gpt.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples.ordinance_gpt.html#running-from-python">Running from Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples.ordinance_gpt.html#running-from-the-command-line-utility">Running from the Command Line Utility</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples.ordinance_gpt.html#execution">Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples.ordinance_gpt.html#debugging">Debugging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples.ordinance_gpt.html#source-ordinance-documents">Source Ordinance Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples.ordinance_gpt.html#extension-to-other-technologies">Extension to Other Technologies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/ords_architecture.html"><strong>OrdinanceGPT: Architectural Design Document</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dev/ords_architecture.html#introduction"><strong>1. Introduction</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#purpose"><strong>1.1 Purpose</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#audience"><strong>1.2 Audience</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#scope"><strong>1.3 Scope</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev/ords_architecture.html#high-level-architecture"><strong>2. High-Level Architecture</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#system-context"><strong>2.1 System Context</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev/ords_architecture.html#detailed-design"><strong>3. Detailed Design</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#web-scraper"><strong>3.1 Web Scraper</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#document-parser"><strong>3.2 Document Parser</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev/ords_architecture.html#key-concepts-and-classes"><strong>4 Key Concepts and Classes</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#key-concept-services"><strong>4.1 Key Concept: Services</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#key-classes"><strong>4.2 Key Classes</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev/ords_architecture.html#workflows"><strong>5. Workflows</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#downloading-documents-from-google"><strong>5.1 Downloading documents from Google</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#querying-openai"><strong>5.2 Querying OpenAI</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev/ords_architecture.html#appendix"><strong>6. Appendix</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dev/ords_architecture.html#tools-and-libraries"><strong>6.1 Tools and Libraries</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dev/ords_architecture.html#deliverables"><strong>7. Deliverables</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="elm.html">API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="elm.base.html">elm.base</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.base.ApiBase.html">elm.base.ApiBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.base.ApiBase.html#elm.base.ApiBase"><code class="docutils literal notranslate"><span class="pre">ApiBase</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.base.ApiQueue.html">elm.base.ApiQueue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.base.ApiQueue.html#elm.base.ApiQueue"><code class="docutils literal notranslate"><span class="pre">ApiQueue</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.chunk.html">elm.chunk</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.chunk.Chunker.html">elm.chunk.Chunker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.chunk.Chunker.html#elm.chunk.Chunker"><code class="docutils literal notranslate"><span class="pre">Chunker</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.cli.html">elm.cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="elm.embed.html">elm.embed</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.embed.ChunkAndEmbed.html">elm.embed.ChunkAndEmbed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.embed.ChunkAndEmbed.html#elm.embed.ChunkAndEmbed"><code class="docutils literal notranslate"><span class="pre">ChunkAndEmbed</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.exceptions.html">elm.exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.exceptions.ELMError.html">elm.exceptions.ELMError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.exceptions.ELMError.html#elm.exceptions.ELMError"><code class="docutils literal notranslate"><span class="pre">ELMError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.exceptions.ELMInputError.html">elm.exceptions.ELMInputError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.exceptions.ELMInputError.html#elm.exceptions.ELMInputError"><code class="docutils literal notranslate"><span class="pre">ELMInputError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.exceptions.ELMKeyError.html">elm.exceptions.ELMKeyError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.exceptions.ELMKeyError.html#elm.exceptions.ELMKeyError"><code class="docutils literal notranslate"><span class="pre">ELMKeyError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.exceptions.ELMRuntimeError.html">elm.exceptions.ELMRuntimeError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.exceptions.ELMRuntimeError.html#elm.exceptions.ELMRuntimeError"><code class="docutils literal notranslate"><span class="pre">ELMRuntimeError</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="elm.ords.html">elm.ords</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="elm.ords.download.html">elm.ords.download</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.download.download_county_ordinance.html">elm.ords.download.download_county_ordinance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.ords.extraction.html">elm.ords.extraction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.extraction.apply.html">elm.ords.extraction.apply</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.extraction.date.html">elm.ords.extraction.date</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.extraction.features.html">elm.ords.extraction.features</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.extraction.graphs.html">elm.ords.extraction.graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.extraction.ngrams.html">elm.ords.extraction.ngrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.extraction.ordinance.html">elm.ords.extraction.ordinance</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.extraction.parse.html">elm.ords.extraction.parse</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.extraction.tree.html">elm.ords.extraction.tree</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.ords.llm.html">elm.ords.llm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.llm.calling.html">elm.ords.llm.calling</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="elm.ords.process.html">elm.ords.process</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">elm.ords.process.process_counties_with_openai</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.process.process_county.html">elm.ords.process.process_county</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.process.process_county_with_logging.html">elm.ords.process.process_county_with_logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.ords.services.html">elm.ords.services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.services.base.html">elm.ords.services.base</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.services.cpu.html">elm.ords.services.cpu</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.services.openai.html">elm.ords.services.openai</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.services.provider.html">elm.ords.services.provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.services.queues.html">elm.ords.services.queues</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.services.threaded.html">elm.ords.services.threaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.services.usage.html">elm.ords.services.usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.ords.utilities.html">elm.ords.utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.utilities.counties.html">elm.ords.utilities.counties</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.utilities.exceptions.html">elm.ords.utilities.exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.utilities.location.html">elm.ords.utilities.location</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.utilities.parsing.html">elm.ords.utilities.parsing</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.utilities.queued_logging.html">elm.ords.utilities.queued_logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.ords.validation.html">elm.ords.validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.validation.content.html">elm.ords.validation.content</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.ords.validation.location.html">elm.ords.validation.location</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.pdf.html">elm.pdf</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.pdf.PDFtoTXT.html">elm.pdf.PDFtoTXT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.pdf.PDFtoTXT.html#elm.pdf.PDFtoTXT"><code class="docutils literal notranslate"><span class="pre">PDFtoTXT</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.summary.html">elm.summary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.summary.Summary.html">elm.summary.Summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.summary.Summary.html#elm.summary.Summary"><code class="docutils literal notranslate"><span class="pre">Summary</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.tree.html">elm.tree</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.tree.DecisionTree.html">elm.tree.DecisionTree</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.tree.DecisionTree.html#elm.tree.DecisionTree"><code class="docutils literal notranslate"><span class="pre">DecisionTree</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.utilities.html">elm.utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.utilities.parse.html">elm.utilities.parse</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.clean_headers.html">elm.utilities.parse.clean_headers</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.combine_pages.html">elm.utilities.parse.combine_pages</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.format_html_tables.html">elm.utilities.parse.format_html_tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.html_to_text.html">elm.utilities.parse.html_to_text</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.is_multi_col.html">elm.utilities.parse.is_multi_col</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.read_pdf.html">elm.utilities.parse.read_pdf</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.read_pdf_ocr.html">elm.utilities.parse.read_pdf_ocr</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.remove_blank_pages.html">elm.utilities.parse.remove_blank_pages</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.remove_empty_lines_or_page_footers.html">elm.utilities.parse.remove_empty_lines_or_page_footers</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.replace_common_pdf_conversion_chars.html">elm.utilities.parse.replace_common_pdf_conversion_chars</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.replace_excessive_newlines.html">elm.utilities.parse.replace_excessive_newlines</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.replace_multi_dot_lines.html">elm.utilities.parse.replace_multi_dot_lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.parse.resembles_html.html">elm.utilities.parse.resembles_html</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.utilities.retry.html">elm.utilities.retry</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.retry.async_retry_with_exponential_backoff.html">elm.utilities.retry.async_retry_with_exponential_backoff</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.retry.retry_with_exponential_backoff.html">elm.utilities.retry.retry_with_exponential_backoff</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.utilities.try_import.html">elm.utilities.try_import</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.try_import.try_import.html">elm.utilities.try_import.try_import</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.utilities.validation.html">elm.utilities.validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.utilities.validation.validate_azure_api_params.html">elm.utilities.validation.validate_azure_api_params</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.version.html">elm.version</a></li>
<li class="toctree-l2"><a class="reference internal" href="elm.web.html">elm.web</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.web.document.html">elm.web.document</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.web.document.BaseDocument.html">elm.web.document.BaseDocument</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.document.HTMLDocument.html">elm.web.document.HTMLDocument</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.document.PDFDocument.html">elm.web.document.PDFDocument</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.web.file_loader.html">elm.web.file_loader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.web.file_loader.AsyncFileLoader.html">elm.web.file_loader.AsyncFileLoader</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.file_loader.AsyncLocalFileLoader.html">elm.web.file_loader.AsyncLocalFileLoader</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.file_loader.AsyncWebFileLoader.html">elm.web.file_loader.AsyncWebFileLoader</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.file_loader.BaseAsyncFileLoader.html">elm.web.file_loader.BaseAsyncFileLoader</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.web.html_pw.html">elm.web.html_pw</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.web.html_pw.load_html_with_pw.html">elm.web.html_pw.load_html_with_pw</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.web.osti.html">elm.web.osti</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.web.osti.OstiList.html">elm.web.osti.OstiList</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.osti.OstiRecord.html">elm.web.osti.OstiRecord</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.web.rhub.html">elm.web.rhub</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.web.rhub.ProfilesList.html">elm.web.rhub.ProfilesList</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.rhub.ProfilesRecord.html">elm.web.rhub.ProfilesRecord</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.rhub.PublicationsList.html">elm.web.rhub.PublicationsList</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.rhub.PublicationsRecord.html">elm.web.rhub.PublicationsRecord</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.web.search.html">elm.web.search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.web.search.base.html">elm.web.search.base</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.search.bing.html">elm.web.search.bing</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.search.duckduckgo.html">elm.web.search.duckduckgo</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.search.dux.html">elm.web.search.dux</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.search.google.html">elm.web.search.google</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.search.run.html">elm.web.search.run</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.search.tavily.html">elm.web.search.tavily</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.search.yahoo.html">elm.web.search.yahoo</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.web.utilities.html">elm.web.utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.web.utilities.DEFAULT_HEADERS.html">elm.web.utilities.DEFAULT_HEADERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.utilities.clean_search_query.html">elm.web.utilities.clean_search_query</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.utilities.compute_fn_from_url.html">elm.web.utilities.compute_fn_from_url</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.utilities.filter_documents.html">elm.web.utilities.filter_documents</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.utilities.get_redirected_url.html">elm.web.utilities.get_redirected_url</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.utilities.pw_page.html">elm.web.utilities.pw_page</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.utilities.write_url_doc_to_file.html">elm.web.utilities.write_url_doc_to_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.utilities.PWKwargs.html">elm.web.utilities.PWKwargs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.web.website_crawl.html">elm.web.website_crawl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.web.website_crawl.BEST_ZONING_ORDINANCE_KEYWORDS.html">elm.web.website_crawl.BEST_ZONING_ORDINANCE_KEYWORDS</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.website_crawl.ELM_URL_FILTER.html">elm.web.website_crawl.ELM_URL_FILTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.website_crawl.ContentTypeExcludeFilter.html">elm.web.website_crawl.ContentTypeExcludeFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.website_crawl.ELMLinkScorer.html">elm.web.website_crawl.ELMLinkScorer</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.website_crawl.ELMWebsiteCrawler.html">elm.web.website_crawl.ELMWebsiteCrawler</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.website_crawl.ELMWebsiteCrawlingStrategy.html">elm.web.website_crawl.ELMWebsiteCrawlingStrategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="elm.web.website_crawl.PeekablePriorityQueue.html">elm.web.website_crawl.PeekablePriorityQueue</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="elm.wizard.html">elm.wizard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="elm.wizard.EnergyWizard.html">elm.wizard.EnergyWizard</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.wizard.EnergyWizard.html#elm.wizard.EnergyWizard"><code class="docutils literal notranslate"><span class="pre">EnergyWizard</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.wizard.EnergyWizardBase.html">elm.wizard.EnergyWizardBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.wizard.EnergyWizardBase.html#elm.wizard.EnergyWizardBase"><code class="docutils literal notranslate"><span class="pre">EnergyWizardBase</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="elm.wizard.EnergyWizardPostgres.html">elm.wizard.EnergyWizardPostgres</a><ul>
<li class="toctree-l4"><a class="reference internal" href="elm.wizard.EnergyWizardPostgres.html#elm.wizard.EnergyWizardPostgres"><code class="docutils literal notranslate"><span class="pre">EnergyWizardPostgres</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../_cli/cli.html">CLI reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../_cli/elm.html">elm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../_cli/elm.html#elm-ords">ords</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">elm</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="elm.html">elm</a></li>
          <li class="breadcrumb-item"><a href="elm.ords.html">elm.ords</a></li>
          <li class="breadcrumb-item"><a href="elm.ords.process.html">elm.ords.process</a></li>
      <li class="breadcrumb-item active">elm.ords.process.process_counties_with_openai</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/nrel/elm/blob/main/docs/source/_autosummary/elm.ords.process.process_counties_with_openai.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="elm-ords-process-process-counties-with-openai">
<h1>elm.ords.process.process_counties_with_openai<a class="headerlink" href="#elm-ords-process-process-counties-with-openai" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="elm.ords.process.process_counties_with_openai">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process_counties_with_openai</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">county_fp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'gpt-4'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">azure_api_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">azure_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">azure_endpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm_call_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm_service_rate_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_splitter_chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_splitter_chunk_overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_urls_to_check_per_county</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_num_concurrent_browsers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_loader_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pytesseract_exe_fp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">td_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tpe_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ppe_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">county_ords_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">county_dbs_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'INFO'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/elm/ords/process.html#process_counties_with_openai"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#elm.ords.process.process_counties_with_openai" title="Link to this definition"></a></dt>
<dd><p>Download and extract ordinances for a list of counties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out_dir</strong> (<em>path-like</em>) – Path to output directory. This directory will be created if it
does not exist. This directory will contain the structured
ordinance output CSV as well as all of the scraped ordinance
documents (PDFs and HTML text files). Usage information and
default options for log/clean directories will also be stored
here.</p></li>
<li><p><strong>county_fp</strong> (<em>path-like, optional</em>) – Path to CSV file containing a list of counties to extract
ordinance information for. This CSV should have “County” and
“State” columns that contains the county and state names.
By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, which runs the extraction for all known
counties (this is untested and not currently recommended).</p></li>
<li><p><strong>model</strong> (<em>str, optional</em>) – Name of LLM model to perform scraping. By default, <code class="docutils literal notranslate"><span class="pre">&quot;gpt-4&quot;</span></code>.</p></li>
<li><p><strong>azure_api_key</strong> (<em>str, optional</em>) – Azure OpenAI API key. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, which pulls the key
from the environment variable <code class="docutils literal notranslate"><span class="pre">AZURE_OPENAI_API_KEY</span></code> instead.</p></li>
<li><p><strong>azure_version</strong> (<em>str, optional</em>) – Azure OpenAI API version. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, which pulls the
version from the environment variable <code class="docutils literal notranslate"><span class="pre">AZURE_OPENAI_VERSION</span></code>
instead.</p></li>
<li><p><strong>azure_endpoint</strong> (<em>str, optional</em>) – Azure OpenAI API endpoint. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, which pulls the
endpoint from the environment variable <code class="docutils literal notranslate"><span class="pre">AZURE_OPENAI_ENDPOINT</span></code>
instead.</p></li>
<li><p><strong>llm_call_kwargs</strong> (<em>dict, optional</em>) – Keyword-value pairs used to initialize an
<cite>elm.ords.llm.LLMCaller</cite> instance. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>llm_service_rate_limit</strong> (<em>int, optional</em>) – Token rate limit of LLm service being used (OpenAI).
By default, <code class="docutils literal notranslate"><span class="pre">4000</span></code>.</p></li>
<li><p><strong>text_splitter_chunk_size</strong> (<em>int, optional</em>) – Chunk size input to
<cite>langchain_text_splitters.character.RecursiveCharacterTextSplitter</cite>.
By default, <code class="docutils literal notranslate"><span class="pre">3000</span></code>.</p></li>
<li><p><strong>text_splitter_chunk_overlap</strong> (<em>int, optional</em>) – Chunk overlap input to
<cite>langchain_text_splitters.character.RecursiveCharacterTextSplitter</cite>.
By default, <code class="docutils literal notranslate"><span class="pre">300</span></code>.</p></li>
<li><p><strong>num_urls_to_check_per_county</strong> (<em>int, optional</em>) – Number of unique Google search result URL’s to check for
ordinance document. By default, <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p></li>
<li><p><strong>max_num_concurrent_browsers</strong> (<em>int, optional</em>) – Number of unique concurrent browser instances to open when
performing Google search. Setting this number too high on a
machine with limited processing can lead to increased timeouts
and therefore decreased quality of Google search results.
By default, <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></li>
<li><p><strong>pytesseract_exe_fp</strong> (<em>path-like, optional</em>) – Path to pytesseract executable. If this option is specified, OCR
parsing for PDf files will be enabled via pytesseract.
By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>td_kwargs</strong> (<em>dict, optional</em>) – Keyword-value argument pairs to pass to
<a class="reference external" href="https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryDirectory" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tempfile.TemporaryDirectory</span></code></a>. The temporary directory is
used to store files downloaded from the web that are still being
parsed for ordinance information. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>tpe_kwargs</strong> (<em>dict, optional</em>) – Keyword-value argument pairs to pass to
<a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ThreadPoolExecutor</span></code></a>. The thread pool
executor is used to run I/O intensive tasks like writing to a
log file. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>ppe_kwargs</strong> (<em>dict, optional</em>) – Keyword-value argument pairs to pass to
<a class="reference external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ProcessPoolExecutor</span></code></a>. The process
pool executor is used to run CPU intensive tasks like loading
a PDF file. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>log_dir</strong> (<em>path-like, optional</em>) – Path to directory for log files. This directory will be created
if it does not exist. By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, which
creates a <code class="docutils literal notranslate"><span class="pre">logs</span></code> folder in the output directory for the
county-specific log files.</p></li>
<li><p><strong>clean_dir</strong> (<em>path-like, optional</em>) – Path to directory for cleaned ordinance text output. This
directory will be created if it does not exist. By default,
<code class="docutils literal notranslate"><span class="pre">None</span></code>, which creates a <code class="docutils literal notranslate"><span class="pre">clean</span></code> folder in the output
directory for the cleaned ordinance text files.</p></li>
<li><p><strong>county_ords_dir</strong> (<em>path-like, optional</em>) – Path to directory for individual county ordinance file outputs.
This directory will be created if it does not exist.
By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, which creates a <code class="docutils literal notranslate"><span class="pre">county_ord_files</span></code>
folder in the output directory.</p></li>
<li><p><strong>county_dbs_dir</strong> (<em>path-like, optional</em>) – Path to directory for individual county ordinance database
outputs. This directory will be created if it does not exist.
By default, <code class="docutils literal notranslate"><span class="pre">None</span></code>, which creates a <code class="docutils literal notranslate"><span class="pre">county_dbs</span></code> folder in
the output directory.</p></li>
<li><p><strong>log_level</strong> (<em>str, optional</em>) – Log level to set for county retrieval and parsing loggers.
By default, <code class="docutils literal notranslate"><span class="pre">&quot;INFO&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>pd.DataFrame</em> – DataFrame of parsed ordinance information. This file will also
be stored in the output directory under “wind_db.csv”.</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="elm.ords.process.html" class="btn btn-neutral float-left" title="elm.ords.process" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="elm.ords.process.process_county.html" class="btn btn-neutral float-right" title="elm.ords.process.process_county" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Alliance for Sustainable Energy, LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>