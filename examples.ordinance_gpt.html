

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ordinance GPT &mdash; elm 0.0.34 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=9dd25805"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="dev/index.html" />
    <link rel="prev" title="The Energy Wizard" href="examples.energy_wizard.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            elm
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home page</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="examples.energy_wizard.html">The Energy Wizard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.energy_wizard.html#downloading-and-embedding-pdfs">Downloading and Embedding PDFs</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.energy_wizard.html#running-the-streamlit-app">Running the Streamlit App</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ordinance GPT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-from-python">Running from Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-from-the-command-line-utility">Running from the Command Line Utility</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#execution">Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debugging">Debugging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#source-ordinance-documents">Source Ordinance Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extension-to-other-technologies">Extension to Other Technologies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dev/ords_architecture.html"><strong>OrdinanceGPT: Architectural Design Document</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="dev/ords_architecture.html#introduction"><strong>1. Introduction</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#purpose"><strong>1.1 Purpose</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#audience"><strong>1.2 Audience</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#scope"><strong>1.3 Scope</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dev/ords_architecture.html#high-level-architecture"><strong>2. High-Level Architecture</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#system-context"><strong>2.1 System Context</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dev/ords_architecture.html#detailed-design"><strong>3. Detailed Design</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#web-scraper"><strong>3.1 Web Scraper</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#document-parser"><strong>3.2 Document Parser</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dev/ords_architecture.html#key-concepts-and-classes"><strong>4 Key Concepts and Classes</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#key-concept-services"><strong>4.1 Key Concept: Services</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#key-classes"><strong>4.2 Key Classes</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dev/ords_architecture.html#workflows"><strong>5. Workflows</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#downloading-documents-from-google"><strong>5.1 Downloading documents from Google</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#querying-openai"><strong>5.2 Querying OpenAI</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dev/ords_architecture.html#appendix"><strong>6. Appendix</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="dev/ords_architecture.html#tools-and-libraries"><strong>6.1 Tools and Libraries</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dev/ords_architecture.html#deliverables"><strong>7. Deliverables</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="_autosummary/elm.html">API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.base.html">elm.base</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.base.ApiBase.html">elm.base.ApiBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.base.ApiBase.html#elm.base.ApiBase"><code class="docutils literal notranslate"><span class="pre">ApiBase</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.base.ApiQueue.html">elm.base.ApiQueue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.base.ApiQueue.html#elm.base.ApiQueue"><code class="docutils literal notranslate"><span class="pre">ApiQueue</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.chunk.html">elm.chunk</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.chunk.Chunker.html">elm.chunk.Chunker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.chunk.Chunker.html#elm.chunk.Chunker"><code class="docutils literal notranslate"><span class="pre">Chunker</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.cli.html">elm.cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.embed.html">elm.embed</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.embed.ChunkAndEmbed.html">elm.embed.ChunkAndEmbed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.embed.ChunkAndEmbed.html#elm.embed.ChunkAndEmbed"><code class="docutils literal notranslate"><span class="pre">ChunkAndEmbed</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.exceptions.html">elm.exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.exceptions.ELMError.html">elm.exceptions.ELMError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.exceptions.ELMError.html#elm.exceptions.ELMError"><code class="docutils literal notranslate"><span class="pre">ELMError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.exceptions.ELMInputError.html">elm.exceptions.ELMInputError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.exceptions.ELMInputError.html#elm.exceptions.ELMInputError"><code class="docutils literal notranslate"><span class="pre">ELMInputError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.exceptions.ELMKeyError.html">elm.exceptions.ELMKeyError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.exceptions.ELMKeyError.html#elm.exceptions.ELMKeyError"><code class="docutils literal notranslate"><span class="pre">ELMKeyError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.exceptions.ELMRuntimeError.html">elm.exceptions.ELMRuntimeError</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.exceptions.ELMRuntimeError.html#elm.exceptions.ELMRuntimeError"><code class="docutils literal notranslate"><span class="pre">ELMRuntimeError</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.ords.html">elm.ords</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.ords.download.html">elm.ords.download</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.download.download_county_ordinance.html">elm.ords.download.download_county_ordinance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.ords.extraction.html">elm.ords.extraction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.extraction.apply.html">elm.ords.extraction.apply</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.extraction.date.html">elm.ords.extraction.date</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.extraction.features.html">elm.ords.extraction.features</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.extraction.graphs.html">elm.ords.extraction.graphs</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.extraction.ngrams.html">elm.ords.extraction.ngrams</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.extraction.ordinance.html">elm.ords.extraction.ordinance</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.extraction.parse.html">elm.ords.extraction.parse</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.extraction.tree.html">elm.ords.extraction.tree</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.ords.llm.html">elm.ords.llm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.llm.calling.html">elm.ords.llm.calling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.ords.process.html">elm.ords.process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.process.process_counties_with_openai.html">elm.ords.process.process_counties_with_openai</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.process.process_county.html">elm.ords.process.process_county</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.process.process_county_with_logging.html">elm.ords.process.process_county_with_logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.ords.services.html">elm.ords.services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.services.base.html">elm.ords.services.base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.services.cpu.html">elm.ords.services.cpu</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.services.openai.html">elm.ords.services.openai</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.services.provider.html">elm.ords.services.provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.services.queues.html">elm.ords.services.queues</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.services.threaded.html">elm.ords.services.threaded</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.services.usage.html">elm.ords.services.usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.ords.utilities.html">elm.ords.utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.utilities.counties.html">elm.ords.utilities.counties</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.utilities.exceptions.html">elm.ords.utilities.exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.utilities.location.html">elm.ords.utilities.location</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.utilities.parsing.html">elm.ords.utilities.parsing</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.utilities.queued_logging.html">elm.ords.utilities.queued_logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.ords.validation.html">elm.ords.validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.validation.content.html">elm.ords.validation.content</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.ords.validation.location.html">elm.ords.validation.location</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.pdf.html">elm.pdf</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.pdf.PDFtoTXT.html">elm.pdf.PDFtoTXT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.pdf.PDFtoTXT.html#elm.pdf.PDFtoTXT"><code class="docutils literal notranslate"><span class="pre">PDFtoTXT</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.summary.html">elm.summary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.summary.Summary.html">elm.summary.Summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.summary.Summary.html#elm.summary.Summary"><code class="docutils literal notranslate"><span class="pre">Summary</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.tree.html">elm.tree</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.tree.DecisionTree.html">elm.tree.DecisionTree</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.tree.DecisionTree.html#elm.tree.DecisionTree"><code class="docutils literal notranslate"><span class="pre">DecisionTree</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.utilities.html">elm.utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.utilities.parse.html">elm.utilities.parse</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.clean_headers.html">elm.utilities.parse.clean_headers</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.combine_pages.html">elm.utilities.parse.combine_pages</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.format_html_tables.html">elm.utilities.parse.format_html_tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.html_to_text.html">elm.utilities.parse.html_to_text</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.is_multi_col.html">elm.utilities.parse.is_multi_col</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.read_pdf.html">elm.utilities.parse.read_pdf</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.read_pdf_ocr.html">elm.utilities.parse.read_pdf_ocr</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.remove_blank_pages.html">elm.utilities.parse.remove_blank_pages</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.remove_empty_lines_or_page_footers.html">elm.utilities.parse.remove_empty_lines_or_page_footers</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.replace_common_pdf_conversion_chars.html">elm.utilities.parse.replace_common_pdf_conversion_chars</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.replace_excessive_newlines.html">elm.utilities.parse.replace_excessive_newlines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.replace_multi_dot_lines.html">elm.utilities.parse.replace_multi_dot_lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.parse.resembles_html.html">elm.utilities.parse.resembles_html</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.utilities.retry.html">elm.utilities.retry</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.retry.async_retry_with_exponential_backoff.html">elm.utilities.retry.async_retry_with_exponential_backoff</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.retry.retry_with_exponential_backoff.html">elm.utilities.retry.retry_with_exponential_backoff</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.utilities.try_import.html">elm.utilities.try_import</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.try_import.try_import.html">elm.utilities.try_import.try_import</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.utilities.validation.html">elm.utilities.validation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.utilities.validation.validate_azure_api_params.html">elm.utilities.validation.validate_azure_api_params</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.version.html">elm.version</a></li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.web.html">elm.web</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.web.document.html">elm.web.document</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.document.BaseDocument.html">elm.web.document.BaseDocument</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.document.HTMLDocument.html">elm.web.document.HTMLDocument</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.document.PDFDocument.html">elm.web.document.PDFDocument</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.web.file_loader.html">elm.web.file_loader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.file_loader.AsyncFileLoader.html">elm.web.file_loader.AsyncFileLoader</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.file_loader.AsyncLocalFileLoader.html">elm.web.file_loader.AsyncLocalFileLoader</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.file_loader.AsyncWebFileLoader.html">elm.web.file_loader.AsyncWebFileLoader</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.file_loader.BaseAsyncFileLoader.html">elm.web.file_loader.BaseAsyncFileLoader</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.web.html_pw.html">elm.web.html_pw</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.html_pw.load_html_with_pw.html">elm.web.html_pw.load_html_with_pw</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.web.osti.html">elm.web.osti</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.osti.OstiList.html">elm.web.osti.OstiList</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.osti.OstiRecord.html">elm.web.osti.OstiRecord</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.web.rhub.html">elm.web.rhub</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.rhub.ProfilesList.html">elm.web.rhub.ProfilesList</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.rhub.ProfilesRecord.html">elm.web.rhub.ProfilesRecord</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.rhub.PublicationsList.html">elm.web.rhub.PublicationsList</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.rhub.PublicationsRecord.html">elm.web.rhub.PublicationsRecord</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.web.search.html">elm.web.search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.search.base.html">elm.web.search.base</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.search.bing.html">elm.web.search.bing</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.search.duckduckgo.html">elm.web.search.duckduckgo</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.search.dux.html">elm.web.search.dux</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.search.google.html">elm.web.search.google</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.search.run.html">elm.web.search.run</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.search.tavily.html">elm.web.search.tavily</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.search.yahoo.html">elm.web.search.yahoo</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.web.utilities.html">elm.web.utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.utilities.DEFAULT_HEADERS.html">elm.web.utilities.DEFAULT_HEADERS</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.utilities.clean_search_query.html">elm.web.utilities.clean_search_query</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.utilities.compute_fn_from_url.html">elm.web.utilities.compute_fn_from_url</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.utilities.filter_documents.html">elm.web.utilities.filter_documents</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.utilities.get_redirected_url.html">elm.web.utilities.get_redirected_url</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.utilities.pw_page.html">elm.web.utilities.pw_page</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.utilities.write_url_doc_to_file.html">elm.web.utilities.write_url_doc_to_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.utilities.PWKwargs.html">elm.web.utilities.PWKwargs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.web.website_crawl.html">elm.web.website_crawl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.website_crawl.BEST_ZONING_ORDINANCE_KEYWORDS.html">elm.web.website_crawl.BEST_ZONING_ORDINANCE_KEYWORDS</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.website_crawl.ELM_URL_FILTER.html">elm.web.website_crawl.ELM_URL_FILTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.website_crawl.ContentTypeExcludeFilter.html">elm.web.website_crawl.ContentTypeExcludeFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.website_crawl.ELMLinkScorer.html">elm.web.website_crawl.ELMLinkScorer</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.website_crawl.ELMWebsiteCrawler.html">elm.web.website_crawl.ELMWebsiteCrawler</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.website_crawl.ELMWebsiteCrawlingStrategy.html">elm.web.website_crawl.ELMWebsiteCrawlingStrategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.web.website_crawl.PeekablePriorityQueue.html">elm.web.website_crawl.PeekablePriorityQueue</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_autosummary/elm.wizard.html">elm.wizard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.wizard.EnergyWizard.html">elm.wizard.EnergyWizard</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.wizard.EnergyWizard.html#elm.wizard.EnergyWizard"><code class="docutils literal notranslate"><span class="pre">EnergyWizard</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.wizard.EnergyWizardBase.html">elm.wizard.EnergyWizardBase</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.wizard.EnergyWizardBase.html#elm.wizard.EnergyWizardBase"><code class="docutils literal notranslate"><span class="pre">EnergyWizardBase</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/elm.wizard.EnergyWizardPostgres.html">elm.wizard.EnergyWizardPostgres</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/elm.wizard.EnergyWizardPostgres.html#elm.wizard.EnergyWizardPostgres"><code class="docutils literal notranslate"><span class="pre">EnergyWizardPostgres</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="_cli/cli.html">CLI reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="_cli/elm.html">elm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="_cli/elm.html#elm-ords">ords</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">elm</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="examples.html">Examples</a></li>
      <li class="breadcrumb-item active">Ordinance GPT</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/nrel/elm/blob/main/docs/source/examples.ordinance_gpt.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ordinance-gpt">
<h1>Ordinance GPT<a class="headerlink" href="#ordinance-gpt" title="Link to this heading"></a></h1>
<p>This example folder contains supporting documents, results, and code for the Ordinance GPT experiment.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h2>
<p>We recommend installing the pytesseract module to allow PDF retrieval for scanned documents.
See the <a class="reference external" href="https://github.com/NREL/elm/blob/main/elm/ords/README.md">ordinance-specific installation instructions</a>
for more details.</p>
</section>
<section id="running-from-python">
<h2>Running from Python<a class="headerlink" href="#running-from-python" title="Link to this heading"></a></h2>
<p>This instruction set presents a simplified example to extract ordinance data from a ordinance document on disk. This corresponds with the ordinance data extraction from PDF results in <a class="reference external" href="https://doi.org/10.48550/arXiv.2403.12924">Buster et al., 2024</a>.</p>
<p>To run this, first download one or more ordinance documents from <a class="reference external" href="https://app.box.com/s/a8oi8jotb9vnu55rzdul7e291jnn7hmq">the Box folder</a>.</p>
<p>After downloading the ordinance document(s), set the relevant path for the <code class="docutils literal notranslate"><span class="pre">fp_pdf</span></code> variable, and then run the script:
.. code-block:: bash</p>
<blockquote>
<div><p>$ python parse_pdf.py</p>
</div></blockquote>
</section>
<section id="running-from-the-command-line-utility">
<h2>Running from the Command Line Utility<a class="headerlink" href="#running-from-the-command-line-utility" title="Link to this heading"></a></h2>
<p>This instruction set is an experimental process to use LLMs to search the internet for relevant ordinance documents, download those documents, and then extract the relevant ordinance data.</p>
<p>There are a few key things you need to set up in order to run ordinance retrieval and extraction.
First, you must specify which counties you want to process. You can do this by setting up a CSV file
with a <code class="docutils literal notranslate"><span class="pre">County</span></code> and a <code class="docutils literal notranslate"><span class="pre">State</span></code> column. Each row in the CSV file then represents a single county to process.
See the <a class="reference external" href="https://github.com/NREL/elm/blob/main/examples/ordinance_gpt/counties.csv">example CSV</a>
file for reference.</p>
<p>Once you have set up the county CSV, you can fill out the
<a class="reference external" href="https://github.com/NREL/elm/blob/main/examples/ordinance_gpt/config.json">template JSON config</a>.
See the documentation for the <a class="reference external" href="https://github.com/NREL/elm/blob/main/elm/ords/process.py#L78">“process_counties_with_openai” function</a>
for an explanation of all the allowed inputs to the configuration file.
Some notable inputs here are the <code class="docutils literal notranslate"><span class="pre">azure*</span></code> keys, which should be configured to match your Azure OpenAI API
deployment (unless it’s defined in your environment with the <code class="docutils literal notranslate"><span class="pre">AZURE_OPENAI_API_KEY</span></code>, <code class="docutils literal notranslate"><span class="pre">AZURE_OPENAI_VERSION</span></code>,
and <code class="docutils literal notranslate"><span class="pre">AZURE_OPENAI_ENDPOINT</span></code> keys, in which case you can remove these keys completely),
and the <code class="docutils literal notranslate"><span class="pre">pytesseract_exe_fp</span></code> key, which should point to the pytesseract executable path on your
local machine (or removed from the config file if you are opting out of OCR). You may also have to adjust
the <code class="docutils literal notranslate"><span class="pre">llm_service_rate_limit</span></code> to match your deployment’s API tokens-per-minute limit. Be sure to provide full
paths to all files/directories unless you are executing the program from your working folder.</p>
<section id="execution">
<h3>Execution<a class="headerlink" href="#execution" title="Link to this heading"></a></h3>
<p>Once you are happy with the configuration parameters, you can kick off the processing using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>elm<span class="w"> </span>ords<span class="w"> </span>-c<span class="w"> </span>config.json
</pre></div>
</div>
<p>You may also wish to add a <code class="docutils literal notranslate"><span class="pre">-v</span></code> option to print logs to the terminal (however, keep in mind that the code runs
asynchronously, so the the logs will not print in order).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Running all of the 85 counties given in the sample county CSV file can cost $700-$1000 in API calls. We recommend running a smaller subset for example purposes.</p>
</div>
</section>
<section id="debugging">
<h3>Debugging<a class="headerlink" href="#debugging" title="Link to this heading"></a></h3>
<p>Not sure why things aren’t working? No error messages? Make sure you run the CLI call with a <code class="docutils literal notranslate"><span class="pre">-v</span></code> flag for “verbose” logging (e.g., <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">elm</span> <span class="pre">ords</span> <span class="pre">-c</span> <span class="pre">config.json</span> <span class="pre">-v</span></code>)</p>
<p>Errors on import statements? Trouble importing <code class="docutils literal notranslate"><span class="pre">pdftotext</span></code> with cryptic error messages like <code class="docutils literal notranslate"><span class="pre">symbol</span> <span class="pre">not</span> <span class="pre">found</span> <span class="pre">in</span> <span class="pre">flat</span> <span class="pre">namespace</span></code>? Follow the <a class="reference external" href="https://github.com/NREL/elm/blob/main/elm/ords/README.md">ordinance-specific install instructions</a> <em>exactly</em>.</p>
</section>
</section>
<section id="source-ordinance-documents">
<h2>Source Ordinance Documents<a class="headerlink" href="#source-ordinance-documents" title="Link to this heading"></a></h2>
<p>The ordinance documents downloaded using (an older version of) this example code can be downloaded <a class="reference external" href="https://app.box.com/s/a8oi8jotb9vnu55rzdul7e291jnn7hmq">here</a>.</p>
</section>
<section id="extension-to-other-technologies">
<h2>Extension to Other Technologies<a class="headerlink" href="#extension-to-other-technologies" title="Link to this heading"></a></h2>
<p>Extending this functionality to other technologies is possible but requires deeper understanding of the underlying processes.
We recommend you start out by examining the decision tree queries in <a class="reference external" href="https://github.com/NREL/elm/blob/main/elm/ords/extraction/graphs.py">graphs.py</a>
as well as how they are applied in <a class="reference external" href="https://github.com/NREL/elm/blob/main/elm/ords/extraction/parse.py">parse.py</a>. Once you
have a firm understanding of these two modules, look through the
<a class="reference external" href="https://github.com/NREL/elm/blob/main/elm/ords/validation">document validation routines</a> to get a better sense of how to
adjust the web-scraping portion of the code to your technology. When you have set up the validation and parsing for your
technology, put it all together by adjusting the <a class="reference external" href="https://github.com/NREL/elm/blob/main/elm/ords/process.py#L78">“process_counties_with_openai” function</a>
to call your new routines.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="examples.energy_wizard.html" class="btn btn-neutral float-left" title="The Energy Wizard" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dev/index.html" class="btn btn-neutral float-right" title="Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Alliance for Sustainable Energy, LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>